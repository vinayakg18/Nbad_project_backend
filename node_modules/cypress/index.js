"use strict";

const minimist = require('minimist');
const debug = require('debug')('cypress:cli');
const args = minimist(process.argv.slice(2));
const util = require('./lib/util');


switch (args.exec) {
  case 'install':
    debug('installing Cypress from NPM');
    require('./lib/tasks/install').start({
      force: args.force
    }).catch(util.logErrorExit1);
    break;
  case 'verify':
   
    debug('verifying Cypress');
    require('./lib/tasks/verify').start({
      force: true
    }) 
    .catch(util.logErrorExit1);
    break;
  default:
    debug('exporting Cypress module interface');
    module.exports = require('./lib/cypress');
}

const { addMatchImageSnapshotPlugin } = require('cypress-image-snapshot/plugin');

module.exports = (on, config) => {
  addMatchImageSnapshotPlugin(on, config);
  return config;
};

